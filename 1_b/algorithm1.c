#include <stdio.h>
#include <math.h>

/**
 * Задача: Реализация кусочно-заданной функции (Вариант 16)
 * Алгоритм 1: Немедленное сообщение об ошибках
 * Область определения: x < 7, ax >= 0
 */

int main() {
    double x, a, b, f_x;
    int range_code;

    // Ввод параметров от пользователя
    printf("Введите x: ");
    if (scanf("%lf", &x) != 1) return 1;
    printf("Введите a: ");
    if (scanf("%lf", &a) != 1) return 1;
    printf("Введите b: ");
    if (scanf("%lf", &b) != 1) return 1;

    // Проверка ОДЗ: Функция определена только для x < 7
    if (x >= 7) {
        printf("Ошибка: Функция не определена для x >= 7 (x = %.2f)\n", x);
        return 0; // Немедленное сообщение об ошибке и выход
    }

    // Сопоставление непрерывного значения x с дискретными кодами для оператора switch
    if (x < 4) {
        range_code = 1;
    } else if (x == 4) {
        range_code = 2;
    } else {
        // Так как мы уже проверили x < 7, эта ветка покрывает 4 < x < 7
        range_code = 3;
    }

    switch (range_code) {
        case 1:
            f_x = cos(x);
            break;

        case 2:
            f_x = pow(x, 3) - b * x + 1;
            break;

        case 3:
            // Проверка ОДЗ: Убедиться, что значение под корнем не отрицательно
            if (a * x < 0) {
                printf("Ошибка: Извлечение квадратного корня из отрицательного числа (ax = %.2f * %.2f = %.2f)\n", a, x, a * x);
                return 0; // Немедленное сообщение об ошибке и выход
            }
            f_x = sqrt(a * x);
            break;

        default:
            printf("Ошибка: Непредвиденный код диапазона.\n");
            return 1;
    }

    // Успешный результат выводится только в конце программы
    printf("Вычисление успешно завершено.\n");
    printf("f(x) = %.4f\n", f_x);

    return 0;
}
