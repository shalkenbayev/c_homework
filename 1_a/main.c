#include <stdio.h>
#include <math.h>
#include <stdlib.h>

/**
 * Программа: Калькулятор кусочно-заданной функции
 * Эта программа вычисляет f(x) по следующим правилам:
 * - f(x) = cos(x)          при x < 4
 * - f(x) = x^3 - bx + 1    при x = 4
 * - f(x) = sqrt(ax)       при 4 < x < 7
 * 
 * Требования:
 * 1. Использование последовательных операторов if (неполная форма).
 * 2. Обработка ошибок области определения (x >= 7).
 * 3. Обработка математических ошибок (ax < 0 для квадратного корня).
 * 4. Немедленный вывод сообщений об ошибках.
 */

int main() {
    double a, b, x, f;
    int calculated = 0; // Флаг для проверки успешного вычисления f

    // Ввод переменных a, b и x
    printf("Введите значения a, b и x: ");
    if (scanf("%lf %lf %lf", &a, &b, &x) != 3) {
        printf("Ошибка: Некорректный ввод. Пожалуйста, введите числовые значения.\n");
        return 1;
    }

    /* Обработка ошибок: Проверка, что функция определена для x < 7 */
    if (x >= 7) {
        printf("Ошибка: Функция определена только для x < 7.\n");
        return 1;
    }

    /* Ветвь 1: x < 4 */
    if (x < 4) {
        f = cos(x);
        calculated = 1;
    }

    /* Ветвь 2: x = 4 */
    if (x == 4) {
        f = pow(x, 3) - (b * x) + 1;
        calculated = 1;
    }

    /* Ветвь 3: 4 < x < 7 */
    if (x > 4 && x < 7) {
        /* Проверка математических ошибок: обеспечение неотрицательности ax */
        if (a * x < 0) {
            printf("Ошибка: Выражение под корнем (ax = %.2f) отрицательно.\n", a * x);
            return 1;
        }
        f = sqrt(a * x);
        calculated = 1;
    }

    /* Вывод результата, если он был вычислен */
    if (calculated) {
        printf("Значение f(x) равно: %.4f\n", f);
    }

    return 0;
}
